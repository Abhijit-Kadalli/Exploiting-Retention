from gtts import gTTS
import os
import random

path = "comment_screenshots"

directories = os.listdir(path)

tts = []

for directory in directories:
    if directory != ".DS_Store":
        with open(path + "/" + directory + "/" + "comments.txt", 'r') as f:
            lines = f.readlines()
            for line in lines:
                if line[0] != "\n":
                    line = line.replace("\n", "")
                    tts.append(line)

speeches = []
narrator_accent = random.choice(['com.au','co.uk','us','ca','co.in','ie','co.za'])

for speech in tts:
        tts = gTTS(text=speech, lang='en', tld=narrator_accent, slow=False)
        speeches.append(tts)

for dir in directories:
    dirs = os.listdir(os.path.join(path,dir))
    for audio_name in dirs:
        if audio_name != "comments.txt":
            audio_name = audio_name.replace(".png", ".mp3")
            speeches.pop(0).save(os.path.join(os.path.join(path,dir),audio_name))
