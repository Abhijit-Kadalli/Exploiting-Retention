from selenium import webdriver
import os
from webdriver_manager.chrome import ChromeDriverManager 
from selenium import webdriver 
from selenium.webdriver.chrome.service import Service as ChromeService
import argparse

def main(url, number_of_screenshots):
    # Create a new instance of the Chrome driver
    driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()))
    driver.maximize_window()
    driver.implicitly_wait(5)
    
    # Get the URL
    driver.get(url)

    # make directory
    url = url.split('/')
    directory = "comment_screenshots/"+url[7]
    if not os.path.exists(directory):
        os.makedirs(directory)

    # take screenshots
    for i in range(number_of_screenshots):
        # CSS selector
        css_selector = "#comment-tree > shreddit-comment:nth-child(" + str(i+1) + ")"
        # find the comment element using CSS selector
        element = driver.find_element(by='css selector', value=css_selector)
        # take screenshot
        element.screenshot(directory + "/" + "comment_" + str(i+1) + ".png")

    driver.quit()

if __name__ == "__main__":
    parser = argparse.ArgumentParser()
    parser.add_argument("--url", help="URL of the website")
    parser.add_argument("--number_of_screenshots", help="Number of screenshots")
    args = parser.parse_args()
    main(args.url, args.number_of_screenshots)

'''

#Provide the URL of the website
url = "https://www.reddit.com/r/AskReddit/comments/13plb2h/how_did_you_realise_that_your_familyextended/"

#number of screenshots
number_of_screenshots = 10

'''